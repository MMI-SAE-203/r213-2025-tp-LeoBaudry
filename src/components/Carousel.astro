---
import { allMaisonsFavori } from '../backend.mjs'; 

const maisonsFavoris = await allMaisonsFavori(); 
const imgUrls = maisonsFavoris.map(maison => maison.imgUrl); 
---

<div x-data="{
    maisonsFavoris: <?json imgUrls ?>, // Passe uniquement les URLs des images au frontend
    currentIndex: 0,
    nextImage() {
        this.currentIndex = (this.currentIndex + 1) % this.maisonsFavoris.length;
    },
    prevImage() {
        this.currentIndex = (this.currentIndex - 1 + this.maisonsFavoris.length) % this.maisonsFavoris.length;
    }
}" class="relative">

    <!-- Carousel -->
    <div class="flex overflow-hidden">
        <template x-for="(imgUrl, index) in maisonsFavoris" :key="index">
            <div x-show="currentIndex === index" class="flex-none w-full">
                <img :src="imgUrl" class="w-full h-64 object-cover">
            </div>
        </template>
    </div>

    <!-- Navigation -->
    <button @click="prevImage" class="absolute top-1/2 left-2 transform -translate-y-1/2 text-white bg-black opacity-50 px-4 py-2 rounded-full">❮</button>
    <button @click="nextImage" class="absolute top-1/2 right-2 transform -translate-y-1/2 text-white bg-black opacity-50 px-4 py-2 rounded-full">❯</button>

</div>
