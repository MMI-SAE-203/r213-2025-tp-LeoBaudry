---
import Base from "../../layouts/Base.astro";
import { addOffre } from "../../backend.mjs"


let message = '';
if (Astro.request.method === "POST") {
    const formData = await Astro.request.formData();
    const response = await addOffre(formData);
    message = response.message;
}
---

<Base title="Ajouter un événement">
    <div class="flex justify-center items-center min-h-screen">
        <div class="w-full max-w-2xl">
            <h1 class="text-lg">Ajouter une offre</h1>
            <form action="/offres/add" method="POST" enctype="multipart/form-data" class="space-y-4">
                <div>
                    <input type="text" name="nomMaison" placeholder="Nom de la maison" required 
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" />
                </div>
                <div>
                    <input type="number" name="prix" placeholder="Prix" 
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500" />
                </div>
                <div>
                    <input type="number" name="nbSdb" placeholder="Nombre de salles de bain" 
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500" />
                </div>
                <div>
                    <input type="number" name="nbChambres" placeholder="Nombre de chambres" 
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500" />
                </div>
                <div>
                    <input type="number" name="surface" placeholder="Superficie" 
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500" />
                </div>
                <div>
                    <input type="file" name="images" 
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500" />
                </div>
                <button type="submit" 
                    class="w-full px-4 py-2 text-white bg-cyan-500 rounded-md hover:bg-cyan-600 focus:outline-none focus:ring-2 focus:ring-cyan-500">
                    Ajouter
                </button>
            </form>
        </div>
    </div>

</Base>